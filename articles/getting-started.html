<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • dispositionEffect</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="dispositionEffect">
<meta property="og:image" content="https://marcozanotti.github.io/dispositionEffect/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dispositionEffect</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/de-analysis.html">The Analysis of Disposition Effect</a>
    </li>
    <li>
      <a href="../articles/de-parallel.html">Disposition Effect in Parallel</a>
    </li>
    <li>
      <a href="../articles/de-timeseries.html">Time Series Disposition Effect</a>
    </li>
    <li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/marcozanotti/dispositionEffect/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-started_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/marcozanotti/dispositionEffect/blob/master/vignettes/getting-started.Rmd"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<p> </p>
<div id="the-disposition-effect" class="section level1">
<h1 class="hasAnchor">
<a href="#the-disposition-effect" class="anchor"></a>The Disposition Effect</h1>
<p>In recent years, an irrational phenomenon in financial markets is grabbing the attention of behavioral economists: the disposition effect. Firstly discovered by H. Shefrin and M. Statman (1985), the disposition effect consists in the realization that investors are more likely to sell an asset when it is gaining value compared to when it is losing value. A phenomenon which is closely related to sunk costs’ bias, diminishing sensitivity, and loss aversion.</p>
<p>From 1985 until now, the disposition effect has been documented in US retail stock investors as well as in foreign retail investors and even among professionals and institutions. By the time, it is a well-established fact that the disposition effect is a real behavioral anomaly that strongly influences the final profits (or losses) of investors. Furthermore, being able to correctly capture these irrational behaviors timely is even more important in periods of high financial volatility as nowadays.</p>
<p>The <code>dispositionEffect</code> package allows to quickly evaluate the presence of disposition effect’s behaviors of an investor based solely on his transactions and the market prices of the traded assets.</p>
<p> </p>
</div>
<div id="installation-loading" class="section level1">
<h1 class="hasAnchor">
<a href="#installation-loading" class="anchor"></a>Installation &amp; Loading</h1>
<p>By the moment, you can only install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"marcozanotti/dispositionEffect"</span><span class="op">)</span></code></pre></div>
<p>You will be able to install the released version of <code>dispositionEffect</code> from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dispositionEffect"</span><span class="op">)</span></code></pre></div>
<p>To load the package simply use the usual <code>library</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://marcozanotti.github.io/dispositionEffect">dispositionEffect</a></span><span class="op">)</span></code></pre></div>
<p> </p>
</div>
<div id="data" class="section level1">
<h1 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h1>
<p>The disposition effect analysis is performed on two fundamental types of data frames:</p>
<ul>
<li>portfolio transactions, that is all the financial transactions an investor did during a specific period of time. A single transaction is made up of 6 features: the investor id, the asset id, the type of the transaction (it can be a buy or a sell), the traded quantity, the traded price, and the datetime.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">investor</span><span class="op">)</span>
<span class="co">#&gt;   investor type asset quantity  price            datetime</span>
<span class="co">#&gt; 1    4273N    B   ACO       45 3.9400 2018-04-09 11:17:00</span>
<span class="co">#&gt; 2    4273N    B  LSUG      450 2.0515 2018-05-17 15:06:00</span>
<span class="co">#&gt; 3    4273N    S   ACO       45 4.1800 2018-05-22 17:11:00</span>
<span class="co">#&gt; 4    4273N    B  IT3S      230 1.0980 2018-05-28 14:30:00</span>
<span class="co">#&gt; 5    4273N    S  IT3S      230 1.0300 2018-06-01 15:27:00</span>
<span class="co">#&gt; 6    4273N    B  LSUG       90 2.5300 2018-06-01 15:43:00</span></code></pre></div>
<ul>
<li>market prices, that is the prices found on the stock markets for each traded asset and each transaction datetimes.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">marketprices</span><span class="op">)</span>
<span class="co">#&gt;   asset            datetime   price</span>
<span class="co">#&gt; 1   ACO 2018-04-09 11:17:00 3.94000</span>
<span class="co">#&gt; 2   AST 2018-04-09 11:17:00 2.19600</span>
<span class="co">#&gt; 3  IT3S 2018-04-09 11:17:00 1.01840</span>
<span class="co">#&gt; 4  LSUG 2018-04-09 11:17:00 2.24950</span>
<span class="co">#&gt; 5   TFI 2018-04-09 11:17:00 0.40575</span>
<span class="co">#&gt; 6   ACO 2018-05-17 15:06:00 4.56000</span></code></pre></div>
<p> </p>
</div>
<div id="gains-and-losses" class="section level1">
<h1 class="hasAnchor">
<a href="#gains-and-losses" class="anchor"></a>Gains and Losses</h1>
<p>Based solely on this two data frames it is possible to compute the so-called realized gains (RG), realized losses (RL), paper gains (PG), and paper losses (PL), as defined by L. Mazzucchelli et al. (2021).</p>
<p>To sum up the main concepts are the followings:</p>
<ul>
<li><p>Realized Gain / Loss =&gt; whenever an investor closes a position in its portfolio in gain / loss</p></li>
<li><p>Paper Gain / Loss =&gt; all the open positions at the moment of the transaction, and all the partially closed positions.</p></li>
</ul>
<p>The <code>portfolio_compute</code> is the core interface of the package and it is used to perform all the gains and losses computations.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">portfolio_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/portfolio_compute.html">portfolio_compute</a></span><span class="op">(</span>
    portfolio_transactions <span class="op">=</span> <span class="va">investor</span>, 
    market_prices <span class="op">=</span> <span class="va">marketprices</span>,
    method <span class="op">=</span> <span class="st">"count"</span>
<span class="op">)</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">portfolio_results</span>, <span class="op">-</span><span class="va">datetime</span><span class="op">)</span>
<span class="co">#&gt;   investor asset quantity price RG_count RL_count PG_count PL_count</span>
<span class="co">#&gt; 1    4273N   ACO      222 2.840        1        0        6        0</span>
<span class="co">#&gt; 2    4273N   AST        0 0.000        0        1        0        0</span>
<span class="co">#&gt; 3    4273N  IT3S        0 0.000        0        1        0        0</span>
<span class="co">#&gt; 4    4273N  LSUG        0 0.000        2        0        4        0</span>
<span class="co">#&gt; 5    4273N   TFI     1400 0.284        0        0        0        0</span></code></pre></div>
<p>The result is a new data frame containing RG, PG, RL, and PL for each traded asset and the updated investor’s portfolio.</p>
<p> </p>
</div>
<div id="disposition-effect" class="section level1">
<h1 class="hasAnchor">
<a href="#disposition-effect" class="anchor"></a>Disposition Effect</h1>
<p>Once that gains and losses have been computed, it is finally possible to evaluate both the disposition effect of the investor and of each traded assets, where the disposition effect is defined as:</p>
<p><span class="math display">\[DE = \bigg(\frac{RG}{RG + PG}\bigg) - \bigg(\frac{RL}{RL + PL}\bigg)\]</span></p>
<p>The DE varies between -1 and 1. Positive DE values show the presence of disposition effect irrational behaviours, while negative values show the presence of opposite disposition effect behaviours. A value of zero show that no disposition effect exists.</p>
<p>The function <code>disposition_effect</code> allow us to compute it.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># assets' disposition effects</span>
<span class="fu"><a href="../reference/disposition_effect.html">disposition_effect</a></span><span class="op">(</span>
    realized_gains <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">RG_count</span>, 
    paper_gains <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">PG_count</span>, 
  realized_losses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">RL_count</span>, 
    paper_losses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">PL_count</span>
<span class="op">)</span>
<span class="co">#&gt; [1]  0.1428571 -1.0000000 -1.0000000  0.3333333  0.0000000</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># investor's disposition effect</span>
<span class="fu"><a href="../reference/disposition_effect.html">disposition_effect</a></span><span class="op">(</span>
    realized_gains <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">RG_count</span>, 
    paper_gains <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">PG_count</span>, 
  realized_losses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">RL_count</span>, 
    paper_losses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">$</span><span class="va">PL_count</span>
<span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; [1] -0.3047619</span></code></pre></div>
<p>However, one may prefer to use the <code>disposition_compute</code> function directly on the results obtained from <code>portfolio_compute</code> for quick and clean computations.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># assets' disposition effects</span>
<span class="va">asset_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/disposition_effect.html">disposition_compute</a></span><span class="op">(</span>gainslosses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">)</span>
<span class="va">asset_de</span>
<span class="co">#&gt;   investor asset   DE_count</span>
<span class="co">#&gt; 1    4273N   ACO  0.1428571</span>
<span class="co">#&gt; 2    4273N   AST -1.0000000</span>
<span class="co">#&gt; 3    4273N  IT3S -1.0000000</span>
<span class="co">#&gt; 4    4273N  LSUG  0.3333333</span>
<span class="co">#&gt; 5    4273N   TFI  0.0000000</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># investor's disposition effect</span>
<span class="va">investor_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/disposition_effect.html">disposition_compute</a></span><span class="op">(</span>gainslosses <span class="op">=</span> <span class="va">portfolio_results</span>, aggregate_fun <span class="op">=</span> <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">investor_de</span>
<span class="co">#&gt;   investor   DE_count</span>
<span class="co">#&gt; 1    4273N -0.3047619</span></code></pre></div>
<p>Moreover, by means of the <code>disposition_summary</code> function it is also easy to summarise the disposition effect behaviour of the investor.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># investor's disposition effect summary statistics</span>
<span class="fu"><a href="../reference/disposition_effect.html">disposition_summary</a></span><span class="op">(</span>gainslosses <span class="op">=</span> <span class="va">portfolio_results</span><span class="op">)</span>
<span class="co">#&gt;   investor   stat   DE_count</span>
<span class="co">#&gt; 1    4273N    Min -1.0000000</span>
<span class="co">#&gt; 2    4273N     Q1 -1.0000000</span>
<span class="co">#&gt; 3    4273N Median  0.0000000</span>
<span class="co">#&gt; 4    4273N     Q3  0.1428571</span>
<span class="co">#&gt; 5    4273N   Mean -0.3047619</span>
<span class="co">#&gt; 6    4273N    Max  0.3333333</span>
<span class="co">#&gt; 7    4273N  StDev  0.6455850</span></code></pre></div>
<p> </p>
</div>
<div id="plotting" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting" class="anchor"></a>Plotting</h1>
<p>Finally, by means of <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>, stunning charts can be produced to easily spot the presence of the disposition effect.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">asset_de</span> <span class="op">%&gt;%</span> 
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">asset</span>, y <span class="op">=</span> <span class="va">DE_count</span>, fill <span class="op">=</span> <span class="va">asset</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>
        title <span class="op">=</span> <span class="st">"Disposition Effect results of the traded assets"</span>,
        subtitle <span class="op">=</span> <span class="st">"Method Count"</span>,
        x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span>
    <span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-13-1.png" width="100%" style="display: block; margin: auto;"></p>
<p> </p>
<hr>
<p>For more detailed tutorials on disposition effect visit <a href="https://marcozanotti.github.io/dispositionEffect">dispositionEffect</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lorenzo Mazzucchelli, Marco Zanotti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
